# 가이드 시스템 간소화 업데이트

## 변경 사항

### 기존 방식 (변경 전)
- 챕터 선택 시 자동으로 가이드 생성
- "숨기기/보이기" 토글 버튼 존재
- 가이드가 항상 활성화된 상태

### 새로운 방식 (변경 후)
- 챕터 선택 시 가이드 생성 안 함 (기본 비활성화)
- "🔄 새가이드" 버튼을 눌러야만 가이드 생성
- 한번 생성된 가이드는 히스토리에 저장되어 유지
- "숨기기/보이기" 버튼 제거 (불필요)

## 사용 흐름

### 1. 처음 챕터 선택
```
챕터 선택
    ↓
가이드 패널에 안내 메시지 표시:
"🔄 새가이드" 버튼을 눌러
AI 글쓰기 가이드를 생성하세요.
```

### 2. 가이드 생성
```
"🔄 새가이드" 버튼 클릭
    ↓
API 호출하여 AI 가이드 생성
    ↓
히스토리에 저장 (버전 1)
    ↓
가이드 표시 + 히스토리 네비게이션 활성화
```

### 3. 추가 가이드 생성
```
"🔄 새가이드" 버튼 다시 클릭
    ↓
새로운 AI 가이드 생성
    ↓
히스토리에 추가 (버전 2)
    ↓
최신 버전으로 자동 이동
```

### 4. 다시 챕터 선택
```
같은 챕터 선택
    ↓
저장된 가이드 자동 표시 (마지막 버전)
    ↓
히스토리 네비게이션으로 이전 버전 탐색 가능
```

## UI 변경 사항

### 데스크톱
```
┌─────────────────────────────────────────┐
│ ✍️ 글쓰기 가이드        생성 중...     │
│                        [🔄 새가이드]    │
├─────────────────────────────────────────┤
│ [◀ 이전] 가이드 2 / 3 [최신] [다음 ▶]   │  ← 가이드가 있을 때만 표시
├─────────────────────────────────────────┤
│                                         │
│ 가이드 내용...                          │
│                                         │
└─────────────────────────────────────────┘
```

### 가이드가 없을 때
```
┌─────────────────────────────────────────┐
│ ✍️ 글쓰기 가이드                        │
│                        [🔄 새가이드]    │
├─────────────────────────────────────────┤
│                                         │
│  "🔄 새가이드" 버튼을 눌러              │
│  AI 글쓰기 가이드를 생성하세요.         │
│                                         │
└─────────────────────────────────────────┘
```

## 코드 변경 요약

### index.html

#### 제거된 기능
- `toggleGuideContent()` 함수 삭제
- "숨기기/보이기" 버튼 제거
- `.guide-content.hidden` CSS 클래스 제거
- `.btn-toggle-guide` CSS 스타일 제거

#### 수정된 기능
- `selectChapter()`: 자동 가이드 생성 제거, 저장된 가이드만 표시
- `generateGuide()`: `forceRegenerate` 파라미터 제거, 항상 새로 생성
- `regenerateGuide()`: 함수명은 유지하되 항상 새 가이드 생성
- 기본 메시지: "새가이드 버튼을 눌러주세요" 안내

### mobile-ui.js

#### 수정된 기능
- `copyGuideContent()`: 토글 버튼 복사 코드 제거
- 새가이드 버튼만 표시

## 장점

### 1. 성능 개선
- 불필요한 API 호출 감소
- 챕터 선택 시 즉시 표시 (가이드 생성 대기 불필요)

### 2. 사용자 경험 개선
- 명확한 의도: 버튼을 눌러야 가이드 생성됨
- 선택적 사용: 필요할 때만 가이드 생성
- 단순화: 숨기기 버튼 제거로 인터페이스 간소화

### 3. 비용 절감
- API 호출 최소화
- 사용자가 원할 때만 AI 가이드 생성

## API 사용량 비교

### 기존 방식
```
챕터 10개 탐색 = 10번 API 호출
(매번 자동으로 가이드 생성)
```

### 새로운 방식
```
챕터 10개 탐색 = 0번 API 호출
새가이드 버튼 2번 클릭 = 2번 API 호출
(필요할 때만 생성)
```

## 하위 호환성

### 기존 데이터
- 이미 생성된 가이드는 모두 정상 표시됨
- 히스토리 데이터 유지
- 데이터베이스 스키마 변경 없음

### 기존 기능
- 가이드 히스토리: 정상 작동
- 버전 탐색: 정상 작동
- 저장/로드: 정상 작동

## 테스트 시나리오

### 시나리오 1: 새 챕터
1. 새 챕터 선택
2. 안내 메시지 확인
3. "새가이드" 버튼 클릭
4. 가이드 생성 확인
5. 히스토리 네비게이션 표시 확인

### 시나리오 2: 기존 챕터
1. 가이드가 있는 챕터 선택
2. 저장된 가이드 즉시 표시 확인
3. 히스토리 네비게이션 표시 확인
4. "새가이드" 버튼으로 추가 생성 가능 확인

### 시나리오 3: 모바일
1. 모바일에서 챕터 선택
2. 가이드 패널 열기
3. "새가이드" 버튼 동작 확인
4. 히스토리 네비게이션 동작 확인

## 문제 해결

### Q: 챕터 선택 시 가이드가 안 보여요
A: 정상입니다. "🔄 새가이드" 버튼을 눌러 가이드를 생성해야 합니다.

### Q: 이전에 생성한 가이드는 어디로 갔나요?
A: 히스토리에 저장되어 있습니다. 챕터를 선택하면 자동으로 표시됩니다.

### Q: 가이드를 다시 숨기고 싶어요
A: 가이드 패널 자체를 닫으면 됩니다. 개별 가이드 숨기기 기능은 제거되었습니다.

### Q: API 호출이 줄어들면 가이드 품질이 떨어지나요?
A: 아니요. 필요할 때만 생성하는 것이므로 품질은 동일합니다. 오히려 불필요한 API 호출이 줄어듭니다.
